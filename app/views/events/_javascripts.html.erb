<% unless request.xhr? %>
	<script type="text/javascript" charset="utf-8">
<% end %>
function toggle_type(elem) {
	var obj_type = $(elem).attr('id').replace('toggle_', '')
	if ($(elem).attr('checked')) {
		$('.not_'+ obj_type).hide();
		$('.not_'+ obj_type).val('');
		$('.not_'+ obj_type+ ' input').val('');
		$('.not_'+ obj_type+ ' select').val('');
		$('.'+ obj_type).show();
	}
	else {
		$('.not_'+ obj_type).show();
		$('.'+ obj_type).hide();
	}
}

$(document).ready(function(){
	$('.date_picker').datepicker({dateFormat:'dd/mm/yy'});
	$('#event_event_scope_type').change(function(){
		var select_value = $(this).val();
		if (select_value) {
			jQuery.get(
				"javascripts/event_types.js",
				{type: select_value}, function() {
					if (select_value == 'Classroom') {
						$('#event_event_scope_id').change(function(){
							if ($(this).val() != '') {
								$('#for-classrooms').show();
								jQuery.get("javascripts/academical.js", {classroom_id: $(this).val()});
							}
							else {
								$('#for-classrooms').hide();
								$('#for-classrooms select').val('');
							}
						});
					}
				}
			)
		}
		else {
			$('#event_scope_id_select').html('');
		}
	});

	$('input:checkbox[id^=toggle_]').click(function(){
		toggle_type(this);
	});

	$('input:checkbox[id^=toggle_]').each(function(){
		toggle_type(this);
	});
});
<% unless request.xhr?  %>
</script>
<% end %>